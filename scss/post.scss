/*------------------------------------
  Page Footer
  -------------------------------------*/

/* Set footer blocks text color from white to brandcolor. */
#page-footer .block {
    color: $gray-dark;
}

/*------------------------------------
  Login page
  -------------------------------------*/

body.loginbackgroundimage {
    background-size: cover;
    background-position: center;
}

/* Add media breakpoint to only load images on screens with a medium size and up.
 * Check if variable exists to only add code to images that were uploaded.
 * Note: Building this code with a @for loop did not work. */
@include media-breakpoint-up(md) {
    @if variable-exists(loginbackgroundimage1){
        body.loginbackgroundimage1 {
            background-image: url($loginbackgroundimage1);
        }
    }
    @if variable-exists(loginbackgroundimage2){
        body.loginbackgroundimage2 {
            background-image: url($loginbackgroundimage2);
        }
    }
    @if variable-exists(loginbackgroundimage3){
        body.loginbackgroundimage3 {
            background-image: url($loginbackgroundimage3);
        }
    }
    @if variable-exists(loginbackgroundimage4){
        body.loginbackgroundimage4 {
            background-image: url($loginbackgroundimage4);
        }
    }
    @if variable-exists(loginbackgroundimage5){
        body.loginbackgroundimage5 {
            background-image: url($loginbackgroundimage5);
        }
    }
    @if variable-exists(loginbackgroundimage6){
        body.loginbackgroundimage6 {
            background-image: url($loginbackgroundimage6);
        }
    }
    @if variable-exists(loginbackgroundimage7){
        body.loginbackgroundimage7 {
            background-image: url($loginbackgroundimage7);
        }
    }
    @if variable-exists(loginbackgroundimage8){
        body.loginbackgroundimage8 {
            background-image: url($loginbackgroundimage8);
        }
    }
    @if variable-exists(loginbackgroundimage9){
        body.loginbackgroundimage9 {
            background-image: url($loginbackgroundimage9);
        }
    }
    @if variable-exists(loginbackgroundimage10){
        body.loginbackgroundimage10 {
            background-image: url($loginbackgroundimage10);
        }
    }
}

/* This will only be needed if the setting "loginform" is checked */
@if $loginform == 'yes' {
    /* Make background of login panel slightly transparent */
    #page-login-index #region-main-box {
        div.card {
        background-color: rgba(255, 255, 255, 0.8);
        border-radius: 3px;
        }
    }

    #page-login-index #page {
        margin-top: 0;
    }
}


/*------------------------------------
  User menu
  -------------------------------------*/

/* Don't display switched role information in the user menu
 * if setting 'showswitchedroleincourse' is active */
@if $showswitchedroleincourse == 'yes' {
    .userswitchedrole .usermenu {
        .usertext {
            float: inherit;
            text-align: inherit;
            margin-right: inherit;
            height: inherit;
        }
        span.meta.role {
            display: none;
        }
        .avatar img {
            margin-left: 1rem;
            margin-right: .5rem;
        }
    }
}


/*------------------------------------
  Nav drawer menu
  -------------------------------------*/

/*
 * We separate or junk sections together by dividing
 * them either by a solid or a dotted line. For the course
 * sections, we display no borders to make clear they are a
 * separate unit.
 * Icons will be added to menu items that are children of a
 * root item and the ident has to be adjusted for consistency
 * throuout the improved menu layout.
 */

#nav-drawer {

    /*
     * General preparation.
     */

    /* First remove all existing borders from the menu items + reset the bottom margin. */
    .list-group-item {
        border: 0;
        margin-bottom: 0;
    }

     /* Reduce space between pix icons and text as this is too much*/
    .media-left {
        padding-right: 2px;
    }

    /* Hide icons of items that don't need one.*/
    a.list-group-item span.media-left > img {
        display: none;
    }

    /*
     * General left menu.
     */

    /* Add solid border: myhome, website start and calendar. */
    a.list-group-item[data-key|=myhome],
    a.list-group-item[data-key|=home],
    a.list-group-item[data-key|=calendar] {
        @include navdrawer-node-separator(parent);
    }

    /* Menu item: my files. */
    a.list-group-item[href*="files"] {
        border-bottom-right-radius: .25rem;
        border-bottom-left-radius: .25rem;
    }

    /* Menu item: my courses. */
    /* Separate the courses menu items from the other ones and add a bottom border*/
    div.list-group-item[data-key|=mycourses] {
        @include navdrawer-node-separator(parent);
        margin-top: 15px;
        border-top-right-radius: .25rem;
        border-top-left-radius: .25rem;
    }

    /* Dashed border for all courses I'm enrolled in except the last one. */
    a.list-group-item[href*="course/view.php?id="] {
        @include navdrawer-node-separator(child);
    }
    a.list-group-item[href*="course/view.php?id="]:last-child {
        border-bottom: none;
    }

    /* Reduce the indent. */
    div.list-group-item[data-key|=mycourses] ~ a.list-group-item[href*="course/view.php?id="] > div {
        margin-left: 0px !important;
    }

    /* Add course icon to each course menu items. */
    div.list-group-item[data-key|=mycourses] ~ a.list-group-item[href*="course/view.php?id="] span.media-left > img {
        display: inherit;
        content: url([[pix:i/course]]);
    }

    /*
     * Course home menu
     */

    /* Add solid border and realign the node with the other ones. */
    a.list-group-item[data-key|=coursehome] {
        @include navdrawer-node-separator(parent);
        padding: .75rem 1.25rem;
    }

    /* Menu items participants, badges and grades need dashed bottom border. */
    a.list-group-item[data-key|=participants],
    a.list-group-item[data-key|=badgesview],
    a.list-group-item[data-key|=grades] {
        @include navdrawer-node-separator(child);
    }

    /* Add icons to menu items participants, badges and grades. */
    a.list-group-item[data-key|=participants] span.media-left > img {
        display: inherit;
        content: url([[pix:i/users]]);
    }
    a.list-group-item[data-key|=badgesview] span.media-left > img {
        display: inherit;
        content: url([[pix:i/badge]]);
    }
    a.list-group-item[data-key|=grades] span.media-left > img {
        display: inherit;
        content: url([[pix:i/grades]]);
    }

    /* Menu items: course sections. */
    a.list-group-item[href*="section-"] {
        padding-left: 0.7rem;
        border: none;
    }

    /* Add and align icons before course section links */
    a.list-group-item[href*="section-"] span.media-left > img {
        display: inherit;
        content: url([[pix:i/folder]]);
     }

    a.list-group-item[href*="section-"] .icon{
        vertical-align: sub;
    }
}


/*------------------------------------
  Course header
  -------------------------------------*/

/*
 * If set in showswitchedroleincourse, the switched role information will be displayed
 * in the course header instead of ben the user name.
 */

.switched-role-infobox {

    span.switched-role {
        font-weight: bold;
        padding-left: 0.5em;
    }

    .switched-role-back {
        padding-top: 10px;
    }

    .switched-role-backlink {
        padding-left: 0.5em;
        vertical-align: middle;
    }
}


/*------------------------------------
  Course content
  -------------------------------------*/

/*
 * Sections
 */

/* Check if setting theme_boost_campus|section0title is set.
   If set, then revert the styles from .accesshide and set the style to be the same as other section titles. */
body.path-course-view #section-0 h3.accesshide {
    @if $section0title == 'yes' {
        position: inherit;
        left: inherit;
        font-weight: $headings-font-weight;
        font-size: $font-size-h3;
    }
}


/*------------------------------------
  Course categories
  -------------------------------------*/

/* Reduce the size and the font-weight of the headings */
.course_category_tree {
    h3 {
        font-size: 1.45rem;
        font-weight: normal;
    }
    h4 {
        font-size: 1.2rem;
        font-weight: normal;
    }
}


/*------------------------------------
  General improvements
  -------------------------------------*/

/* Mark broken links with red color. */
a[href*="/brokenfile.php"] {
    color: $brand-danger;
}

/* Add Font Awesome "broken chain" icon in front of broken link. */
a[href*="/brokenfile.php"]::before {
    font-family: FontAwesome;
    content: "\f127" !important;
    padding-right: 10px;
}

/* Add Font Awesome "email" icon in front of mailto links. */
a[href^="mailto"]::before {
    font-family: FontAwesome;
    content: "\f003";
    padding-right: 5px;
}


/*------------------------------------
  Additional Elements
  -------------------------------------*/

/* Back to top button */
#back-to-top {
    display: none;
    position: fixed;
    bottom: 0.5em;
    right: 0.5em;
    color: $brand-primary;
    cursor: pointer;
}
